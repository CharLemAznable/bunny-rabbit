-- noinspection SqlNoDataSourceInspectionForFile

-- [updateBalanceByPayment]
UPDATE SERVICE_ACCOUNT    SA
   SET SA.SERVICE_BALANCE = SA.SERVICE_BALANCE - #paymentValue#
 WHERE SA.SERVICE_CODE    = #chargingType#
   AND SA.SERVICE_BALANCE >= #paymentValue#

-- [createPaymentSequence]
INSERT INTO SERVICE_ACCOUNT_SEQ
      (SEQ_ID
      ,SERVICE_CODE
      ,SERVICE_USED
      ,SERVICE_UNIT)
SELECT #seqId#
      ,SA.SERVICE_CODE
      ,#paymentValue#
      ,SA.SERVICE_UNIT
  FROM SERVICE_ACCOUNT SA
 WHERE SA.SERVICE_CODE = #chargingType#
